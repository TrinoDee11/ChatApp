
<%- include('../partials/header') %>
<section class="auth-modern d-flex align-items-center justify-content-center" style="min-height: 100vh; background-color: #f8f9fa;">
  <div class="container">
    <div class="row justify-content-center">
      <div class="col-lg-5 col-md-7">
        <!-- Modern card with subtle depth -->
        <div class="bg-white rounded-4 p-4 p-md-5 shadow-sm" style="border: 1px solid rgba(0,0,0,0.03); max-width: 440px; margin: 0 auto;">
          <!-- Abstract graphic header -->
          <div class="text-center mb-4 position-relative">
            <div class="position-absolute start-50 translate-middle-x" style="top: -60px;">
              <div class="bg-success bg-opacity-10 rounded-circle p-3 d-flex align-items-center justify-content-center" style="width: 80px; height: 80px;">
                <svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path d="M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z" fill="#34C759"/>
                  <path d="M19.4 15C19.2669 15.3016 19.227 15.6362 19.2855 15.9606C19.344 16.285 19.4983 16.5833 19.7263 16.8114C19.9544 17.0394 20.2527 17.1937 20.5771 17.2522C20.9015 17.3107 21.2361 17.2708 21.5377 17.1377L21.6283 17.0919C21.9121 16.9534 22.1442 16.7273 22.2899 16.4477C22.4356 16.1681 22.4868 15.8504 22.4356 15.5409C22.3844 15.2314 22.2339 14.9474 22.0083 14.7319L21.9019 14.6283C21.6864 14.4027 21.4024 14.2522 21.0929 14.201C20.7834 14.1498 20.4657 14.201 20.1861 14.3467C19.9065 14.4924 19.6804 14.7245 19.5419 15.0083L19.4 15Z" fill="#34C759"/>
                  <path d="M4.6 15L4.45811 15.0083C4.31962 14.7245 4.09352 14.4924 3.81392 14.3467C3.53432 14.201 3.21659 14.1498 2.90709 14.201C2.59759 14.2522 2.31362 14.4027 2.09807 14.6283L1.99174 14.7319C1.76614 14.9474 1.61557 15.2314 1.56438 15.5409C1.5132 15.8504 1.56438 16.1681 1.7101 16.4477C1.85582 16.7273 2.08794 16.9534 2.37174 17.0919L2.46234 17.1377C2.76393 17.2708 3.09849 17.3107 3.4229 17.2522C3.74731 17.1937 4.04559 17.0394 4.27365 16.8114C4.50171 16.5833 4.65604 16.285 4.71454 15.9606C4.77303 15.6362 4.73314 15.3016 4.6 15Z" fill="#34C759"/>
                  <path d="M12 4.6V4.45811C11.7162 4.31962 11.4841 4.09352 11.3384 3.81392C11.1927 3.53432 11.1415 3.21659 11.1927 2.90709C11.2439 2.59759 11.3944 2.31362 11.62 2.09807L11.7237 1.99174C11.9392 1.76614 12.2232 1.61557 12.5327 1.56438C12.8422 1.5132 13.1599 1.56438 13.4395 1.7101C13.7191 1.85582 13.9452 2.08794 14.0837 2.37174L14.1295 2.46234C14.2626 2.76393 14.3025 3.09849 14.244 3.4229C14.1855 3.74731 14.0312 4.04559 13.8031 4.27365C13.5751 4.50171 13.2768 4.65604 12.9524 4.71454C12.628 4.77303 12.2934 4.73314 11.9919 4.6H12Z" fill="#34C759"/>
                  <path d="M12 19.5419V19.4C12.3016 19.2669 12.6362 19.227 12.9606 19.2855C13.285 19.344 13.5833 19.4983 13.8114 19.7263C14.0394 19.9544 14.1937 20.2527 14.2522 20.5771C14.3107 20.9015 14.2708 21.2361 14.1377 21.5377L14.0919 21.6283C13.9534 21.9121 13.7273 22.1442 13.4477 22.2899C13.1681 22.4356 12.8504 22.4868 12.5409 22.4356C12.2314 22.3844 11.9474 22.2339 11.7319 22.0083L11.6283 21.9019C11.4027 21.6864 11.2522 21.4024 11.201 21.0929C11.1498 20.7834 11.201 20.4657 11.3467 20.1861C11.4924 19.9065 11.7245 19.6804 12.0083 19.5419H12Z" fill="#34C759"/>
                </svg>
              </div>
            </div>
            <h1 class="h3 mt-4 fw-semibold" style="color: #212529;">WELCOME</h1>
            <p class="text-muted" style="font-size: 0.9375rem;">Sign in to access your account</p>
          </div>

          <% if (error) { %>
          <div class="alert bg-danger bg-opacity-10 border border-danger border-opacity-10 rounded-3 p-3 mb-4 animate__animated animate__fadeIn" style="font-size: 0.875rem;">
            <div class="d-flex align-items-center">
              <svg width="18" height="18" fill="#dc3545" viewBox="0 0 16 16" class="me-2 flex-shrink-0">
                <path d="M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"/>
              </svg>
              <div><%= error %></div>
            </div>
          </div>
          <% } %>

          <form method="POST" action="/login" class="mt-3">
            <!-- Email Field -->
            <div class="mb-4">
              <label class="form-label d-block mb-2" style="font-size: 0.8125rem; font-weight: 500; color: #495057;">Email address</label>
              <div class="input-group">
                <input 
                  type="email" 
                  name="email" 
                  class="form-control rounded-3 py-2 px-3" 
                  placeholder="Enter your email" 
                  value="<%= form.email || '' %>" 
                  required
                  style="border-color: #dee2e6; font-size: 0.9375rem; transition: all 0.2s ease;"
                >
              </div>
            </div>

            <!-- Password Field -->
            <div class="mb-4">
              <div class="d-flex justify-content-between mb-2">
                <label class="form-label" style="font-size: 0.8125rem; font-weight: 500; color: #495057;">Password</label>
                <a href="/forgot-password" class="text-decoration-none" style="font-size: 0.8125rem; color: #34C759;">Forgot password?</a>
              </div>
              <div class="input-group">
                <input 
                  type="password" 
                  name="password" 
                  class="form-control rounded-3 py-2 px-3" 
                  placeholder="Enter your password" 
                  required
                  style="border-color: #dee2e6; font-size: 0.9375rem; transition: all 0.2s ease;"
                >
                <button class="btn btn-outline-secondary border-start-0 bg-transparent" type="button" id="togglePassword" style="border-color: #dee2e6;">
                  <svg width="18" height="18" fill="#6c757d" viewBox="0 0 16 16">
                    <path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM1.173 8a13.133 13.133 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.133 13.133 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5c-2.12 0-3.879-1.168-5.168-2.457A13.134 13.134 0 0 1 1.172 8z"/>
                    <path d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z"/>
                  </svg>
                </button>
              </div>
            </div>

            <!-- Submit Button -->
            <button 
              type="submit" 
              class="btn w-100 py-2 rounded-3 border-0 text-white fw-medium mt-2" 
              style="background-color: #34C759; font-size: 0.9375rem; transition: all 0.2s ease; box-shadow: 0 2px 8px rgba(52, 199, 89, 0.2);"
              onmouseover="this.style.transform='translateY(-1px)'; this.style.boxShadow='0 4px 12px rgba(52, 199, 89, 0.3)'"
              onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 8px rgba(52, 199, 89, 0.2)'"
              onmousedown="this.style.transform='translateY(0)'"
            >
              Sign In
            </button>
          </form>

          <div class="text-center mt-4 pt-3" style="border-top: 1px solid #e9ecef;">
            <p class="text-muted mb-0" style="font-size: 0.875rem;">Don't have an account? 
              <a href="/register" class="text-decoration-none fw-medium" style="color: #34C759;">Create account</a>
            </p>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  @import url('https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css');
  
  .auth-modern input:focus {
    border-color: #34C759 !important;
    box-shadow: 0 0 0 3px rgba(52, 199, 89, 0.15) !important;
  }
  
  .auth-modern .form-control {
    transition: all 0.2s ease;
  }
  
  .auth-modern .btn:active {
    transform: scale(0.98) !important;
  }
  
  #togglePassword:hover {
    background-color: #f8f9fa !important;
  }
</style>

<script>
  // Password visibility toggle
  document.getElementById('togglePassword').addEventListener('click', function() {
    const passwordInput = document.querySelector('input[name="password"]');
    const icon = this.querySelector('svg');
    
    if (passwordInput.type === 'password') {
      passwordInput.type = 'text';
      icon.setAttribute('fill', '#34C759');
    } else {
      passwordInput.type = 'password';
      icon.setAttribute('fill', '#6c757d');
    }
  });

  // Add subtle focus animations
  document.querySelectorAll('.form-control').forEach(input => {
    input.addEventListener('focus', () => {
      input.style.borderColor = '#34C759';
    });
    input.addEventListener('blur', () => {
      input.style.borderColor = '#dee2e6';
    });
  });
</script>
<%- include('../partials/footer') %>
